(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{835:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return u}});var r=e(5893);function a(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function o(n){return function(n){if(Array.isArray(n))return a(n)}(n)||function(n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||function(n,t){if(n){if("string"===typeof n)return a(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=e(7294),i=e(9669),c=e.n(i),l=function(n){var t=n.name,e=n.type,a=n.onDeleteTag,o=e||"link";return(0,r.jsxs)("div",{className:"Tag",children:[(0,r.jsx)("div",{className:"name",children:(0,r.jsx)("span",{children:t})}),"edit"===o&&(0,r.jsx)("div",{className:"delete",onClick:function(){a(t)},children:(0,r.jsx)("span",{children:"X"})})]})},u=function(){var n=(0,s.useState)(""),t=n[0],e=n[1],a=(0,s.useState)(""),i=a[0],u=a[1],d=(0,s.useState)([]),f=d[0],p=d[1],m=(0,s.useState)(""),h=m[0],v=m[1];var j=function(n){console.log("delete "+n);var t=f.filter((function(t){return n!==t}));p(t)};return(0,r.jsxs)("div",{className:"New",children:[(0,r.jsxs)("div",{className:"post-new-form",children:[(0,r.jsx)("label",{className:"label-line",htmlFor:"title",children:"Title"}),(0,r.jsx)("input",{className:"post-new-input post-new-title",name:"title",onInput:function(n){e(n.target.value)}})]}),(0,r.jsxs)("div",{className:"post-new-form",children:[(0,r.jsx)("label",{className:"label-line",htmlFor:"content",children:"Content"}),(0,r.jsx)("textarea",{className:"post-new-input post-new-content",name:"content",onInput:function(n){u(n.target.value)}})]}),(0,r.jsxs)("div",{className:"post-new-form",children:[(0,r.jsx)("label",{children:"Tags"}),(0,r.jsxs)("div",{className:"tags",children:[f.map((function(n,t){return(0,r.jsx)(l,{name:n,type:"edit",onDeleteTag:j},n)})),(0,r.jsxs)("div",{className:"new-tag",children:[(0,r.jsx)("input",{value:h,onInput:function(n){v(n.target.value)}}),(0,r.jsx)("button",{onClick:function(){var n=[].concat(o(f),[h]);p(n)},children:"+"})]})]})]}),(0,r.jsx)("button",{onClick:function(){var n={title:t,content:i,tags:f},e=function(n){var t=document.cookie.match(new RegExp("(^| )"+n+"=([^;]+)"));if(t)return t[2]}("token"),r={headers:{"Content-Type":"application/json"}};e&&(r.headers.Authorization=e),c().post("https://blog.hardboiled65.tk/api/v1/posts",n,r).then((function(n){200===n.status&&console.log("success")})).catch((function(n){alert("Failed to post new post: "+n+"\n"+JSON.stringify(n.response.data))}))},children:"Post"})]})}},7360:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new",function(){return e(835)}])}},function(n){n.O(0,[669,774,888,179],(function(){return t=7360,n(n.s=t);var t}));var t=n.O();_N_E=t}]);