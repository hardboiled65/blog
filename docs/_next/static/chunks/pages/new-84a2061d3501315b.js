(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{7360:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new",function(){return e(1463)}])},1463:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return u}});var r=e(5893),a=e(7294),o=e(9669),s=e.n(o),i=function(n){var t=n.name,e=n.type,a=n.onDeleteTag,o=e||"link";return(0,r.jsxs)("div",{className:"Tag",children:[(0,r.jsx)("div",{className:"name",children:(0,r.jsx)("span",{children:t})}),"edit"===o&&(0,r.jsx)("div",{className:"delete",onClick:function(){a(t)},children:(0,r.jsx)("span",{children:"X"})})]})};function l(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function c(n){return function(n){if(Array.isArray(n))return l(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"===typeof n)return l(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return l(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(){var n=(0,a.useState)(""),t=n[0],e=n[1],o=(0,a.useState)(""),l=o[0],u=o[1],d=(0,a.useState)([]),f=d[0],p=d[1],m=(0,a.useState)(""),h=m[0],v=m[1],j=function(n){console.log("delete "+n);var t=f.filter((function(t){return n!==t}));p(t)};return(0,r.jsxs)("div",{className:"New",children:[(0,r.jsxs)("div",{className:"post-new-form",children:[(0,r.jsx)("label",{className:"label-line",htmlFor:"title",children:"Title"}),(0,r.jsx)("input",{className:"post-new-input post-new-title",name:"title",onInput:function(n){e(n.target.value)}})]}),(0,r.jsxs)("div",{className:"post-new-form",children:[(0,r.jsx)("label",{className:"label-line",htmlFor:"content",children:"Content"}),(0,r.jsx)("textarea",{className:"post-new-input post-new-content",name:"content",onInput:function(n){u(n.target.value)}})]}),(0,r.jsxs)("div",{className:"post-new-form",children:[(0,r.jsx)("label",{children:"Tags"}),(0,r.jsxs)("div",{className:"tags",children:[f.map((function(n,t){return(0,r.jsx)(i,{name:n,type:"edit",onDeleteTag:j},n)})),(0,r.jsxs)("div",{className:"new-tag",children:[(0,r.jsx)("input",{value:h,onInput:function(n){v(n.target.value)}}),(0,r.jsx)("button",{onClick:function(){var n=c(f).concat([h]);p(n)},children:"+"})]})]})]}),(0,r.jsx)("button",{onClick:function(){var n={title:t,content:l,tags:f},e=function(n){var t=document.cookie.match(new RegExp("(^| )"+n+"=([^;]+)"));if(t)return t[2]}("token"),r={headers:{"Content-Type":"application/json"}};e&&(r.headers.Authorization=e),s().post("https://blog.hardboiled65.io/api/v1/posts",n,r).then((function(n){200===n.status&&console.log("success")})).catch((function(n){alert("Failed to post new post: "+n+"\n"+JSON.stringify(n.response.data))}))},children:"Post"})]})}}},function(n){n.O(0,[669,774,888,179],(function(){return t=7360,n(n.s=t);var t}));var t=n.O();_N_E=t}]);